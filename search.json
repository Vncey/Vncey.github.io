[{"title":"Mqbroker cannot start. No Mqbroker is running.","path":"/2022/11/24/rocketmq/","content":"##### Observation:\n###### rocketMq log Path: log/rocketmqlogs/\n---\n#### broker.log\n``` bash\n2022-11-23 17:37:50 INFO main - load /root/store/config/subscriptionGroup.json OK\n2022-11-23 17:37:50 INFO main - load /root/store/config/consumerFilter.json OK\n2022-11-23 17:37:50 INFO main - Try to start service thread:AllocateMappedFileService started:false lastThread:null\n2022-11-23 17:37:50 INFO main - Try to shutdown service thread:AllocateMappedFileService started:true lastThread:Thread[AllocateMappedFileService,5,main]\n2022-11-23 17:37:50 INFO main - shutdown thread AllocateMappedFileService interrupt true\n2022-11-23 17:37:50 INFO main - join thread AllocateMappedFileService elapsed time(ms) 1 90000\n2022-11-23 17:37:50 INFO main - Try to shutdown service thread:PullRequestHoldService started:false lastThread:null\n```\n#### broker_default.log\n``` bash\n2022-11-15 14:38:55 WARN main - Unknown channel option 'SO_KEEPALIVE' for channel '[id: 0xb9a74f62]'\n2022-11-15 14:38:55 WARN main - Unknown channel option 'SO_KEEPALIVE' for channel '[id: 0x58284471]'\n2022-11-23 17:06:23 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@4f6ee6e4\n2022-11-23 17:33:13 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@327514f\n2022-11-23 17:37:50 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@327514f\n2022-11-23 19:10:24 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@4f6ee6e4\n2022-11-23 19:11:07 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@4f6ee6e4\n2022-11-23 19:12:45 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@4f6ee6e4\n2022-11-23 19:13:25 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@4f6ee6e4\n2022-11-23 19:15:46 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@4f6ee6e4\n2022-11-23 19:23:34 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@4f6ee6e4\n2022-11-23 19:39:07 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@4f6ee6e4\n2022-11-24 10:03:14 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@4f6ee6e4\n2022-11-24 10:03:14 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@15de0b3c\n2022-11-24 10:03:14 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@3c9754d8\n2022-11-24 10:03:14 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@3bf7ca37\n2022-11-24 10:03:14 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@79079097\n2022-11-24 10:03:15 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@85e6769\n2022-11-24 10:03:15 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@48a12036\n2022-11-24 10:03:15 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@bf1ec20\n2022-11-24 10:03:15 INFO main - instrumented a special java.util.Set into: sun.nio.ch.EPollSelectorImpl@70efb718\n2022-11-24 10:03:16 INFO main - Looking for a resource file of name [META-INF/service/org.apache.rocketmq.remoting.RPCHook] ...\n2022-11-24 10:03:16 WARN main - No resource file with name [META-INF/service/org.apache.rocketmq.remoting.RPCHook] found.\n```\n#### store.log\n``` bash\n2022-11-23 19:39:07 INFO main - load consume queue OFFSET_MOVED_EVENT-0 OK\n2022-11-23 19:39:07 INFO main - load logics queue all over, OK\n2022-11-23 19:39:07 INFO main - store checkpoint file exists, /root/store/checkpoint\n2022-11-23 19:39:07 INFO main - store checkpoint file physicMsgTimestamp 1669191612663, 20221123082012663\n2022-11-23 19:39:07 INFO main - store checkpoint file logicsMsgTimestamp 1669191612663, 20221123082012663\n2022-11-23 19:39:07 INFO main - store checkpoint file indexMsgTimestamp 0, 19700101000000000\n2022-11-23 19:39:07 ERROR main - load exception\njava.lang.IllegalStateException: java.lang.reflect.InaccessibleObjectException: Unable to make public java.lang.Object java.nio.DirectByteBuffer.attachment() accessible: module java.base does not \"opens java.nio\" to unnamed module @7be0cc22\n\tat org.apache.rocketmq.store.MappedFile$1.run(MappedFile.java:105)\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\n\tat org.apache.rocketmq.store.MappedFile.invoke(MappedFile.java:98)\n\tat org.apache.rocketmq.store.MappedFile.viewed(MappedFile.java:130)\n\tat org.apache.rocketmq.store.MappedFile.clean(MappedFile.java:94)\n\tat org.apache.rocketmq.store.MappedFile.cleanup(MappedFile.java:439)\n\tat org.apache.rocketmq.store.ReferenceResource.release(ReferenceResource.java:63)\n\tat org.apache.rocketmq.store.ReferenceResource.shutdown(ReferenceResource.java:47)\n\tat org.apache.rocketmq.store.MappedFile.destroy(MappedFile.java:447)\n\tat org.apache.rocketmq.store.index.IndexFile.destroy(IndexFile.java:89)\n\tat org.apache.rocketmq.store.index.IndexService.load(IndexService.java:71)\n\tat org.apache.rocketmq.store.DefaultMessageStore.load(DefaultMessageStore.java:209)\n\tat org.apache.rocketmq.broker.BrokerController.initialize(BrokerController.java:270)\n\tat org.apache.rocketmq.broker.BrokerStartup.createBrokerController(BrokerStartup.java:220)\n\tat org.apache.rocketmq.broker.BrokerStartup.main(BrokerStartup.java:57)\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make public java.lang.Object java.nio.DirectByteBuffer.attachment() accessible: module java.base does not \"opens java.nio\" to unnamed module @7be0cc22\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\n\tat java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)\n\tat java.base/java.lang.reflect.Method.setAccessible(Method.java:193)\n\tat org.apache.rocketmq.store.MappedFile$1.run(MappedFile.java:102)\n\t... 14 common frames omitted\n2022-11-23 19:39:07 WARN AllocateMappedFileService - AllocateMappedFileService interrupted, possibly by shutdown.\n2022-11-23 19:39:07 INFO AllocateMappedFileService - AllocateMappedFileService service end\n```\n---\n\n### Solution\n1. delete abort file in the root/store folder\n    - start the mqbroker again\n    - if issue still persist , use step 2.\n2. delete root/store folder\n   - restart rocketmq again , it will auto regenerate store folder. \n   - start the mqbroker again.\n   - if issue still persist, proceed to step 3.\n3. delete root/store folder, restart the server - sudo restart\n   - start namesrv again \n   - start mqbroker again","tags":["RocketMQ"],"categories":["MQ"]},{"title":"Hello World","path":"/2022/11/24/hello-world/","content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)"}]